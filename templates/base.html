<!DOCTYPE html>
 <html>
   <head>
      <title>TigerSnatch</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
      <link rel="stylesheet" type="text/css" href="{{url_for('static', filename='styles.css')}}">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <script type=text/javascript>
      
        // links client-side and backend logic for add and remove from waitlist 
        $(document).ready(function() {
          // listener for waitlist "switch"
          $('input.waitlist-switch').on('click', function(e) {
            e.preventDefault()
            btn = e.target
            classid = e.target.getAttribute("data-classid") 
            
            // if user is not on waitlist for this class
            if (btn.getAttribute("data-on-waitlist") === "false") {
                $.post(`/add_to_waitlist/${classid}`,
                  function(res) {
                    console.log(res)
                    // checks that user successfully added to waitlist on back-end
                    if (!res["isSuccess"]) {
                      console.log(`Failed to add to waitlist for class ${classid}`)
                      return
                    }
                    btn.setAttribute("data-on-waitlist", "true")
                    btn.setAttribute("value", "Remove Me")
                    console.log(`Successfully added to waitlist for class ${classid}`)
                });
            }

            // if user is not on waitlist for this class
            else {
                if (!window.confirm("Are you sure you want to be removed from the waitlist?"))
                  return false

                $.post(`/remove_from_waitlist/${classid}`,
                  function(res) {
                    // checks that user successfully removed from waitlist on back-end
                    if (!res["isSuccess"]) {
                      console.log(`Failed to remove from waitlist for class ${classid}`)
                      return
                    }
                    btn.setAttribute("data-on-waitlist", "false")
                    btn.setAttribute("value", "Add Me")
                    console.log(`Successfully removed from waitlist for class ${classid}`)
                });
            }
             return false;
          });
        });
        
      </script>
    </head>
   <body>
      <form id="logout-btn" action="/logout" method="get">
          <input type="submit" value="Logout"></input>
      </form>
      <br>

      <div class="container">
        <div class="row align-items-start">
          {% block content %}{% endblock %}
        </div>
      </div>

    </body>
 </html>
