{% extends 'base.html' %} {% block title %} {% if course_details is none %}
<title>TigerSnatch | Courses</title>
{% else %}
<title>TigerSnatch | {{course_details.displayname}}</title>
{% endif %} {% endblock %} {% block content %}
<div id="search-wrapper" class="col-sm-4">
    <div>Search for a course</div>
    <form id="search-form" class="form-inline" action="/course" method="get">
        {% include 'search_form.html' %}
        <input type="hidden" name="courseid" value="{{course_details.courseid}}" />
    </form>
    {% include 'search_results.html' %}
</div>

<div id="course-wrapper" class="col-sm-8">
    {% if course_details is none %}
    <div>Search for a course...</div>
    {% else %}

    <div>
        <div>{{course_details.displayname}}</div>
        <div>{{course_details.title}}</div>
    </div>

    <div class="table-responsive-lg">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Section</th>
                    <th scope="col">Time</th>
                    <th scope="col">Days</th>
                    <th scope="col">Enrollment</th>
                    <th scope="col">Notify Me</th>
                </tr>
            </thead>
            <tbody>
                {% for class in classes_list %}
                    <tr>
                        <td>{{class.section}}</td>
                        {% if class.end_time == "" %}
                            <td>{{class.start_time}}</td>
                        {% else %}
                            <td>{{class.start_time}} - {{class.end_time}}</td>
                        {% endif %}
                        <td>{{class.days}}</td>
                        <td>{{class.enrollment}} / {{class.capacity}}</td>
                        {% if class.isFull %} {% if class.classid in curr_waitlists %}
                            <td>
                                <div class="form-check form-switch">
                                    <input 
                                        class="form-check-input waitlist-switch" 
                                        type="checkbox"
                                        id="switch-{{class.classid}}"
                                        data-classid="{{class.classid}}"
                                        data-bs-toggle="modal"
                                        data-bs-target="#confirm-remove-waitlist"
                                        checked
                                    >
                                </div>
                            </td>
                        {% else %}
                        <td>
                            <div class="form-check form-switch">
                                <input 
                                    class="form-check-input waitlist-switch" 
                                    type="checkbox"
                                    id="switch-{{class.classid}}"
                                    data-classid="{{class.classid}}"
                                >
                            </div>
                        </td>
                        {% endif %} {% endif %}
                    </tr>
                {% endfor %} 
            </tbody>
        </table>
    </div>
    <br />

    <!-- Modal -->
    <div class="modal fade" id="confirm-remove-waitlist" data-classid="" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Confirm Removal from Waitlist</h5>
            </div>
            <div class="modal-body">
                Are you sure you want to remove yourself from this waitlist?
            </div>
            <div class="modal-footer">
                <button type="button" id="waitlist-modal-cancel" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" id="waitlist-modal-confirm" class="btn btn-primary" data-bs-dismiss="modal">Confirm</button>
            </div>
            </div>
        </div>
    </div>
    
    {% endif %}
</div>
{% endblock %}
