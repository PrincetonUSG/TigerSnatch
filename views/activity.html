<!DOCTYPE html>
<html>

<head>
  {% include 'common.html' %}
  <title>TigerSnatch | Activity</title>
</head>

{% include 'nav/nav.html' %}

<body id="landing-container">
  <div class="container-fluid">
    <div class="row activity-row">
      <div id="subscription-activity-col"
           class="col-xl-6">
        <p class="text-center fs-1 px-5 mt-4 mb-4"
           style="letter-spacing: 1px">
          <span
                class="badge bg-warning text-dark font-monospace fs-3 px-2 py-2">Subscriptions</span>
        </p>
        {% if waitlist_logs == [] %}
        <div class="card activity-card text-center mt-3">
          <div class="card-body">
            <div>
              Once a spot is available in one of your Subscribed sections and you receive an email
              and text message about that spot, a message will appear here!
            </div>
          </div>
        </div>
        {% else %} {% for waitlist_log in waitlist_logs %}
        <div class="card activity-card text-center mt-3">
          <div class="card-body">
            <div>{{waitlist_log}}</div>
          </div>
        </div>
        {% endfor %} {% endif %}
      </div> <!-- subscription-activity-col -->
      
      <div id="trade-activity-col"
           class="col-xl-6">
        <p class="text-center fs-1 px-5 mt-4 mb-4"
           style="letter-spacing: 1px">
          <span class="badge bg-warning text-dark font-monospace fs-3 px-2 py-2">Trades</span>
        </p>
        {% if trade_logs == [] %}
        <div class="card activity-card text-center mt-3">
          <div class="card-body">
            <div>
              Once you've initiated an email to Trade sections with another Tiger, a message will
              appear here!
            </div>
          </div>
        </div>
        {% else %} {% for trade_log in trade_logs %}
        <div class="card activity-card text-center mt-3">
          <div class="card-body">
            <div>{{trade_log}}</div>
          </div>
        </div>
        {% endfor %} {% endif %}
      </div> <!-- trade-activity-col -->
    </div> <!-- row -->

    <div class="row activity-row">
      <p class="text-center fs-1 px-5 mt-4 mb-4"
          style="letter-spacing: 1px">
        <span class="badge bg-warning text-dark font-monospace fs-3 px-2 py-2">Statistics</span>
      </p>
      <div id="stats-activity-col-l" class="stats-col col-xl-6">
          <div class="card activity-card text-center mt-3">
            <div class="card-body">
              <div class="card-title">Top 10 Subscribed Courses</div>
              <div class="card-subtitle mb-2 text-muted">Note that only the most subscribed section from each course is shown.</div>
              {% if stats['stats_top_subs'] == [] %}
                <div>Data currently unavailable.</div>
              {% else %}
                <ul class="list-group">
                  {% for sub in stats['stats_top_subs'] %}
                      <div class= "list-group-item d-flex align-items-center justify-content-between">
                          <label class="stats-top-course">
                            {{sub['deptnum']}}: {{sub['name']}} ({{sub['section']}})
                          </label>
                          <span class="badge">{{ sub['size'] }}</span>
                      </div>
                  {% endfor %}
                </ul>
              {% endif %}
            </div> <!-- card-body -->
          </div> <!-- card -->
      </div> <!-- stats-activity-col-l -->
      <div id="stats-activity-col-r" class="stats-col col-xl-6">
          <div class="card activity-card text-center mt-3">
            <div class="card-body">
              <div class="card-title">
                TigerSnatch by the Numbers
              </div>
              <div class="list-group">
                <div class="list-group-item align-items-center stats-item">
                  <label>
                    Number of Subscribed Users: 
                  </label>
                  <span class="badge">{{ stats['stats_subbed_users'] }}</span>
                </div>
                <div class="list-group-item d-flex justify-content-center align-items-center stats-item">
                  <label>
                    Number of Sections with Subscriptions: 
                  </label>
                  <span class="badge">{{ stats['stats_subbed_sections'] }}</span>
                </div>
                <div class="list-group-item align-items-center stats-item">
                  <label>
                    Number of Courses with Subscriptions: 
                  </label>
                  <span class="badge">{{ stats['stats_subbed_courses'] }}</span>
                </div>
                <div class="list-group-item align-items-center stats-item">
                  <label>
                    Number of Emails Sent:
                  </label>
                  <span class="badge">{{ stats['stats_total_notifs'] }}</span>
                </div>
              </div> <!-- list-group -->
            </div> <!-- card-body -->
          </div> <!-- card -->
      </div> <!-- stats-activity-col-r -->
    </div> <!-- row -->
    
    <nav id="nav"
          class="navbar navbar-expand-xl navbar-light fixed-bottom"
          style="margin-top: -60px">
      <div class="container-fluid">
        <p id="landing-bottom-text"
            class="mb-0 text-center">
          <a href="/activity"
              style="text-decoration: underline">Refresh</a>
          the page to view your latest activity!
        </p>
      </div>
    </nav>
  </div> <!-- container-fluid -->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
          crossorigin="anonymous"></script>
</body>
<script src="{{url_for('static', filename='app.min.8.5.js')}}"></script>

</html>